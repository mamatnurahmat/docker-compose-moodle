{"version":3,"file":"remuiloader.min.js","sources":["../src/remuiloader.js"],"sourcesContent":["/* eslint-disable no-console */\n/* eslint-disable jsdoc/require-jsdoc*/\n/* eslint-disable jsdoc/require-jsdoc*/\n/* eslint-disable jsdoc/require-jsdoc*/\n// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * @module     theme_remui/remuiloader\n * @copyright (c) 2020 WisdmLabs (https://wisdmlabs.com/)\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\ndefine(['jquery'], function($) {\n\n    const registerCommonEvents = () => {\n\n        // Make AddBlock modal full Width.\n        $('[data-key=\"addblock\"]').click(function() {\n            setTimeout(function() {\n                $('.modal[data-region=\"modal-container\"]').addClass(\"fullwidth-modal\");\n            }, 500);\n        });\n\n\n        // This events handle the collapse issue on the messaging panel.\n        msgBodyViewFavourite.on('click', function(e) {\n            stopCollapseInMsgPanel(msgBodyViewFavourite, e);\n        });\n\n        msgBodyViewGroupmsg.on('click', function(e) {\n            stopCollapseInMsgPanel(msgBodyViewGroupmsg, e);\n        });\n\n        msgBodyViewPrivate.on('click', function(e) {\n            stopCollapseInMsgPanel(msgBodyViewPrivate, e);\n        });\n\n        // This events handle the collapse issue on the messaging page .\n        msgPanelBodyViewFavourite.on('click', function(e) {\n            stopCollapseInMsgPanel(msgPanelBodyViewFavourite, e);\n        });\n\n        msgPanelBodyViewGroupmsg.on('click', function(e) {\n            stopCollapseInMsgPanel(msgPanelBodyViewGroupmsg, e);\n        });\n\n        msgPanelBodyViewPrivate.on('click', function(e) {\n            stopCollapseInMsgPanel(msgPanelBodyViewPrivate, e);\n        });\n\n        $(\".nav-grouping-selector ul li \").on(\"click\", function() {\n            $(this).siblings(\"li\").find(\"a\").removeAttr(\"aria-current\", false);\n            $(this).find(\"a\").attr(\"aria-current\", true);\n        });\n\n        $(\".nav-display-selector ul li \").on(\"click\", function() {\n            $(this).siblings(\"li\").find(\"a\").removeAttr(\"aria-current\", false);\n            $(this).siblings(\"li\").find(\"span\").removeAttr(\"aria-current\", false);\n            $(this).find(\"a\").attr(\"aria-current\", true);\n            $(this).find(\"span\").attr(\"aria-current\", true);\n        });\n\n        registerGoToTopEvents();\n\n        registerShowPasswordAction();\n    };\n\n    // Variables for msg body container\n    var msgBodyViewFavourite = $('[data-region=\"body-container\"]').find('[data-region=\"view-overview-favourites\"]');\n    var msgBodyViewGroupmsg = $('[data-region=\"body-container\"]').find('[data-region=\"view-overview-group-messages\"]');\n    var msgBodyViewPrivate = $('[data-region=\"body-container\"]').find('[data-region=\"view-overview-messages\"]');\n\n    // Variables for msg panel body container(messaging page)\n    var msgPanelBodyViewFavourite = $('[data-region=\"panel-body-container\"]').find('[data-region=\"view-overview-favourites\"]');\n    var msgPanelBodyViewGroupmsg = $('[data-region=\"panel-body-container\"]').find('[data-region=\"view-overview-group-messages\"]');\n    var msgPanelBodyViewPrivate = $('[data-region=\"panel-body-container\"]').find('[data-region=\"view-overview-messages\"]');\n\n    /*\n     * Common method to stop collapsing messaging tabs\n     */\n    const stopCollapseInMsgPanel = ($this, e) => {\n        if ($this.hasClass('expanded')) {\n            e.preventDefault();\n            e.stopPropagation();\n        }\n    };\n    /*\n     * Creating mini version of bootstrap-select for Dropdowns\n     * {String} dropdownselector class selector for dropdown\n     */\n    const generateDropdownSearch = (dropdownselector) => {\n\n        var _catmenus = $(dropdownselector + '+ .dropdown-menu');\n        var _searchfield = \".catsearch\";\n\n        var sr_text = M.util.get_string('searchcatplaceholdertext', 'theme_remui');\n        var _inputfield = '<div class=\"simplesearchform edw-search-field catsearchfield p-3\">';\n        _inputfield += '<div class=\"input-group d-flex align-items-center\">';\n        _inputfield += '<label for=\"header-category-searchinput\">';\n        _inputfield += '<span class=\"sr-only\">Search</span>';\n        _inputfield += '</label>';\n        _inputfield += '<div class=\"input-group-prepend\">';\n        _inputfield += '<button type=\"submit\" class=\"btn btn-submit\" data-action=\"submit\">';\n        _inputfield += '<span class=\"edw-icon edw-icon-Search\"></span>';\n        _inputfield += '<span class=\"sr-only\">' + sr_text + '</span>';\n        _inputfield += '</button>';\n        _inputfield += '</div>';\n        _inputfield += '<input tabindex=\"1\" type=\"text\" id=\"header-category-searchinput\" class=\"catsearch form-control withclear navigation-text\" placeholder=\"' + sr_text + '\" aria-label=\"' + sr_text + '\" name=\"catsearch\">';\n        _inputfield += '</div>';\n\n        _catmenus.prepend(_inputfield);\n        $(\".catsearch-item\").unbind();\n        $(\".catsearch-item .catsearch\").unbind();\n        /*\n         * Search Function in the dropdown items according to input field text.\n         */\n        function filterFunction() {\n          var input, filter, a, i;\n          input = $('.catselector-menu + .dropdown-menu').find(\".catsearch\");\n\n          filter = input.val().toUpperCase();\n\n            a = _catmenus.find(\"a\");\n            for (i = 0; i < a.length; i++) {\n                var _txtval = a[i].textContent || a[i].innerText;\n                _txtval = _txtval.split(\" \").join(\"\");\n                if (_txtval.toUpperCase().indexOf(filter) > -1) {\n                    a[i].style.display = \"\";\n                } else {\n                    a[i].style.display = \"none\";\n                }\n            }\n        }\n        _catmenus.find(_searchfield).on(\"keyup\", function(e) {\n            if (e.which == 32) {\n                return true;\n            }\n            filterFunction();\n        });\n\n    };\n\n    const registerGoToTopEvents = () => {\n        const _GOTOPSELECTOR = \"#gotop\";\n        // Scroll to top.\n        $(_GOTOPSELECTOR).click(function() {\n            $('html, body').animate({scrollTop: 0}, $(window).scrollTop() / 6);\n            return false;\n        });\n\n        // Hide and Show Go to top button.\n        $(window).scroll(function() {\n            if ($(this).scrollTop() > 300) {\n                $(_GOTOPSELECTOR).removeClass(\"d-none\").addClass(\"d-flex\");\n            } else {\n                $(_GOTOPSELECTOR).removeClass(\"d-flex\").addClass(\"d-none\");\n            }\n        });\n    };\n\n    const registerShowPasswordAction = () => {\n        const _passwordfieldwrapper = '.password-field-eye';\n        const _passwordShowIcon = _passwordfieldwrapper + ' .show-password-icon';\n        const _passwordInputField = _passwordfieldwrapper + ' input[name=\"password\"]';\n\n        $(_passwordShowIcon).hover(\n           function() {\n               $(_passwordInputField).attr(\"type\", \"text\");\n           },\n           function() {\n               $(_passwordInputField).attr(\"type\", \"password\");\n           }\n        );\n    };\n\n    return {\n        init: function() {\n            registerCommonEvents();\n\n            // Enable Category Search filter in header.\n            if ($(\".catselector-menu\").length) {\n                generateDropdownSearch(\".catselector-menu\");\n            }\n            // Search Page Content handling\n            if (!$('#page-search-index .search-results').length) {\n                // var data = \"<div class = 'search-result-count p-mb-4 d-none small-info-semibold'>0 \"+ M.util.get_string('searchtotalcount', 'theme_remui')+\"</div>\";\n                var htmldata = '<div class=\"search-results\">' + M.util.get_string('noresutssearchmsg', 'theme_remui') + '' + '</div>';\n                $(\"#page-search-index #region-main  [role = main]\").append(htmldata);\n            } else {\n                var searchdata = $(\"#page-search-index  #id_searchcontainer [name=q]\").val();\n                searchdata = \"<div class=' p-mt-2 h-regular-6'>\"+M.util.get_string('searchresultdesctext', 'theme_remui') +' `' +searchdata +'`' + \"</div>\";\n                console.log(searchdata);\n                $('#page-search-index  .page-header-headings').append(searchdata);\n            }\n            $(\"#page-search-index .search-result-count\").detach().prependTo(\"#page-search-index #region-main\")\n            $(\"#page-search-index .search-result-count\").removeClass('d-none');\n        },\n    };\n});\n"],"names":["define","$","registerCommonEvents","click","setTimeout","addClass","msgBodyViewFavourite","on","e","stopCollapseInMsgPanel","msgBodyViewGroupmsg","msgBodyViewPrivate","msgPanelBodyViewFavourite","msgPanelBodyViewGroupmsg","msgPanelBodyViewPrivate","this","siblings","find","removeAttr","attr","registerGoToTopEvents","registerShowPasswordAction","$this","hasClass","preventDefault","stopPropagation","generateDropdownSearch","dropdownselector","_catmenus","sr_text","M","util","get_string","_inputfield","prepend","unbind","which","filter","a","i","val","toUpperCase","length","_txtval","textContent","innerText","split","join","indexOf","style","display","filterFunction","animate","scrollTop","window","scroll","removeClass","_passwordfieldwrapper","hover","init","searchdata","console","log","append","htmldata","detach","prependTo"],"mappings":"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"}