define(["jquery","core/ajax","core/chartjs"],function(t,a){var e={CHART:"#barChart",CHART_AREA:"#quiz-chart-area",COURSE_LIST:"#quiz-course-list",COURSE_LIST_SELECTED:"option:selected",ERROR:".quiz-stats-error"},n=null,i=function(t){let a,e=0;return t.forEach(function(t,n){a=Math.max.apply(Math,t.data),e=a>e?a:e}),Math.ceil(e/20)};function s(s){var o=t(s).find(e.COURSE_LIST+" "+e.COURSE_LIST_SELECTED).data("id");a.call([{methodname:"block_remuiblck_get_quiz_participation",args:{courseid:o}}])[0].done(function(a){if(void 0===a.datasets)t(s).find(e.CHART_AREA).hide(),t(s).find(e.ERROR).show();else{null!==n&&n.destroy();var o=t(s).find(e.CHART).get(0).getContext("2d");o.canvas.height=400;var r={labels:a.labels,datasets:a.datasets};n=new Chart(o,{type:"bar",data:r,options:{responsive:!0,maintainAspectRatio:!1,scales:{yAxes:[{scaleLabel:{display:!0,labelString:M.util.get_string("noofstudents","block_remuiblck")},ticks:{min:0,stepSize:i(a.datasets)}}]}}})}}).fail(function(a){t(s).find(e.CHART_AREA).hide(),t(s).find(e.ERROR).show()})}return{init:function(a){t(document).ready(function(){!function(a){t(a).find(e.COURSE_LIST).on("change",function(){s(a)})}(a),t(a).find(e.CHART).length&&s(a)})}}});
//# sourceMappingURL=quizstats.min.js.map
