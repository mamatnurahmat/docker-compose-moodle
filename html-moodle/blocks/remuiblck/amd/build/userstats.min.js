define("block_remuiblck/userstats",["jquery","core/ajax","block_remuiblck/chartjs","theme_remui/bootstrap-select"],(function($,Ajax){var myDoughnut=null,pieOptions={segmentShowStroke:!0,segmentStrokeColor:"#fff",segmentStrokeWidth:1,percentageInnerCutout:50,animationSteps:100,animateRotate:!0,animateScale:!1,responsive:!0,maintainAspectRatio:!0,legendTemplate:'<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<segments.length; i++){%><span style="background-color:<%=segments[i].fillColor%>"></span><%if(segments[i].label){%><%=segments[i].label%><%}%></li><%}%></ul>',tooltipTemplate:"<%=value %> <%=label%> users",legend:{display:!1},plugins:{legend:{display:!1}}};function createpiechart(){var categoryId=$("#coursecategorylistblock option:selected").data("id");Ajax.call([{methodname:"block_remuiblck_get_enrolled_users_by_category",args:{categoryid:categoryId}}])[0].done((function(response){if(null===response)$("canvas#pieChartblock").hide(),$(".enroll-stats-nouserserror").hide(),$(".chart-legend").hide(),$(".enroll-stats-error").show();else{$(".enroll-stats-error").hide(),$(".enroll-stats-nouserserror").hide(),$(".chart-legend").show(),$("canvas#pieChartblock").show(),$("#enrolled_users_stats_block .chart-legend").empty();var colors=["#264485","#0051F9","#37BE71","#4caf50","#8bc34a","#ffeb3b","#ff9800","#f44336","#9c27b0","#673ab7","#3f51b5"];$.each(response.labels,(function(index,value){$("#enrolled_users_stats_block .chart-legend").append('<li class="list-group-item d-flex align-items-center flex-gap-4 p-0"><span class="badge badge-round text-trasparent" style="background-color:'+colors[index]+';">1</span><span >'+value+':<span class="st-count">'+response.data[index]+"</span></span></li>")})),function(response){null!==myDoughnut&&myDoughnut.destroy();var pieChartCanvas=$("#pieChartblock").get(0).getContext("2d"),doughnutData={labels:response.labels,datasets:[{data:response.data,backgroundColor:response.background_color,hoverBackgroundColor:response.hoverBackground_color}]};myDoughnut=new Chart(pieChartCanvas,{type:"doughnut",data:doughnutData,options:pieOptions})}(response)}})).fail((function(){$("canvas#pieChartblock").hide(),$(".enroll-stats-error").show()}))}$("#enrolled_users_stats_block select").length&&($("#enrolled_users_stats_block select#coursecategorylistblock").on("change",(function(){createpiechart()})),createpiechart()),$(".coursecategorylistblock").selectpicker()}));

//# sourceMappingURL=userstats.min.js.map