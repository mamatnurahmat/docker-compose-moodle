define("block_remuiblck/notes",["jquery","core/ajax"],(function($,Ajax){var courseId,studentCount,userId,courseName,SELECTORS_ADD_NOTE_BUTTON=".add-notes-button",SELECTORS_ADD_NOTE_SELECT=".add-notes-select",SELECTORS_SITE_NOTE=".site-note",SELECTORS_COURSE_NOTE=".course-note",SELECTORS_PERSONAL_NOTE=".personal-note",SELECTORS_STUDENT_LABEL=".select2-studentlist-label",SELECTORS_STUDENT_LIST=".select2-studentlist",SELECTORS_SELECT_STUDENT_NOTE=".select-note-student",SELECTORS_ADD_NOTES_BUTTON_WRAPPER=".add-notes-button-wrapper";$(SELECTORS_ADD_NOTE_SELECT).length&&($(SELECTORS_ADD_NOTE_BUTTON).hide(),$(SELECTORS_STUDENT_LABEL).hide(),$(SELECTORS_STUDENT_LIST).hide(),$(SELECTORS_ADD_NOTE_SELECT+" select").on("change",(function(){if($(SELECTORS_ADD_NOTE_BUTTON).hide(),$(SELECTORS_SELECT_STUDENT_NOTE).removeClass("d-none"),courseId=$(this).children(":selected").attr("id"),courseName=$(this).children(":selected").text(),void 0===courseId)return $(SELECTORS_STUDENT_LABEL).hide(),$(SELECTORS_STUDENT_LIST).empty(),void $(SELECTORS_STUDENT_LIST).hide();Ajax.call([{methodname:"block_remuiblck_get_enrolled_users_by_course",args:{courseid:courseId}}])[0].done((function(response){studentCount=Object.keys(response).length,$(SELECTORS_STUDENT_LABEL).show(),$(SELECTORS_STUDENT_LIST).show(),$(SELECTORS_STUDENT_LIST).empty(),studentCount?($(SELECTORS_STUDENT_LIST).append("<option>"+M.util.get_string("selectastudent","block_remuiblck")+" ("+M.util.get_string("total","moodle")+": "+studentCount+")</option>"),$.each(response,(function(index,student){$(SELECTORS_STUDENT_LIST).append('<option value="'+student.id+'">'+student.fullname+"</option>")}))):$(SELECTORS_STUDENT_LIST).append("<option>"+M.util.get_string("nousersenrolledincourse","block_remuiblck",courseName)+"</option>")})).fail((function(ex){$(SELECTORS_STUDENT_LIST).html("<option>"+ex.message+"</option>")}))})),$(SELECTORS_STUDENT_LIST).on("change",(function(){$(SELECTORS_ADD_NOTE_BUTTON).show(),$(SELECTORS_ADD_NOTES_BUTTON_WRAPPER).removeClass("d-none"),userId=$(this).find("option:selected").val();var notesLink=M.cfg.wwwroot+"/notes/edit.php?courseid="+courseId+"&userid="+userId+"&publishstate=site";$(SELECTORS_ADD_NOTE_BUTTON+" "+SELECTORS_SITE_NOTE).attr("href",notesLink),notesLink=M.cfg.wwwroot+"/notes/edit.php?courseid="+courseId+"&userid="+userId+"&publishstate=public",$(SELECTORS_ADD_NOTE_BUTTON+" "+SELECTORS_COURSE_NOTE).attr("href",notesLink),notesLink=M.cfg.wwwroot+"/notes/edit.php?courseid="+courseId+"&userid="+userId+"&publishstate=draft",$(SELECTORS_ADD_NOTE_BUTTON+" "+SELECTORS_PERSONAL_NOTE).attr("href",notesLink)})))}));

//# sourceMappingURL=notes.min.js.map